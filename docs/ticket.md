# 指摘事項・改善案

> 優先度や実装難易度を考慮して対応

## 対応済み

### ピン止め座標ぶっ飛び問題 ✅
- **現象**: fixed↔absolute切替時にメモがずれる
- **原因**: スクロール位置を考慮していなかった
- **対応**: 切替時に`window.scrollX/Y`を加減算

### ジャンプ機能不動作 ✅
- **現象**: ポップアップからジャンプしても何も起きない
- **原因**: useEffect依存配列にmemosがなく古い状態を参照
- **対応**: 依存配列にmemosを追加

### 最小化ドラッグで展開される ✅
- **現象**: 最小化アイコンをドラッグすると離した時に展開
- **原因**: onClick/onMouseDownが競合
- **対応**: 5px以上移動したらドラッグ、それ以下はクリック判定

### ピン止め/解除アイコン区別 ✅
- **現象**: ピン状態がアイコンで分からない
- **対応**: IconPin↔IconPinOffを状態に応じて切替

---

## 保留（将来検討）

### 右下配置時のメモ表示問題
- **現象**: 最小化アイコンを右下に置くと展開時に見えない
- **理由**: 展開位置がビューポート外になる
- **案**: 展開時に位置をビューポート内に収まるよう自動調整
- **難易度**: 🟡 中（ウィンドウサイズ監視等が必要）

### 座標をpx→%に変更
- **現象**: 画面サイズが変わると位置が不適切になる
- **理由**: 異なる解像度のモニターで使う場合に問題
- **案**: 
  - パーセント座標オプションを追加
  - または「右端から○px」形式で保存
- **難易度**: 🟡 中（データ構造変更が必要）
